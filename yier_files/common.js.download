var mIcons = [];
mIcons['d_ajhk.png'] = 45;
mIcons['d_bjf.png'] = 33;
mIcons['d_com1.png'] = 11;
mIcons['d_com2.png'] = 23;
mIcons['d_dczc.png'] = 29;
mIcons['d_fbjh.png'] = 31;
mIcons['d_fz.png'] = 3;
mIcons['d_ggjt.png'] = 16;
mIcons['d_gzsr.png'] = 24;
mIcons['d_hrqw.png'] = 32;
mIcons['d_hzsp.png'] = 38;
mIcons['d_jbsr.png'] = 50;
mIcons['d_jjsr.png'] = 46;
mIcons['d_jjwy.png'] = 2;
mIcons['d_jltx.png'] = 5;
mIcons['d_jrbx.png'] = 10;
mIcons['d_jysd.png'] = 51;
mIcons['d_jzsr.png'] = 37;
mIcons['d_ljsr.png'] = 25;
mIcons['d_lxsr.png'] = 36;
mIcons['d_lxzc.png'] = 53;
mIcons['d_mrf.png'] = 44;
mIcons['d_qtsr.png'] = 13;
mIcons['d_rcyp.png'] = 15;
mIcons['d_rqwl.png'] = 8;
mIcons['d_sbzz.png'] = 19;
mIcons['d_sdmq.png'] = 28;
mIcons['d_sgls.png'] = 39;
mIcons['d_sjcf.png'] = 40;
mIcons['d_sjf.png'] = 30;
mIcons['d_smzb.png'] = 43;
mIcons['d_spjs.png'] = 1;
mIcons['d_swf.png'] = 41;
mIcons['d_tzks.png'] = 34;
mIcons['d_tzsr.png'] = 54;
mIcons['d_wxby.png'] = 52;
mIcons['d_wygl.png'] = 56;
mIcons['d_xcjt.png'] = 4;
mIcons['d_xfss.png'] = 14;
mIcons['d_xjjz.png'] = 20;
mIcons['d_xmbb.png'] = 26;
mIcons['d_xxjx.png'] = 7;
mIcons['d_xxwl.png'] = 42;
mIcons['d_xxyl.png'] = 6;
mIcons['d_ydjs.png'] = 18;
mIcons['d_yfsp.png'] = 0;
mIcons['d_yhsx.png'] = 22;
mIcons['d_yjc.png'] = 27;
mIcons['d_yjf.png'] = 48;
mIcons['d_ylbj.png'] = 9;
mIcons['d_ypf.png'] = 21;
mIcons['d_ywds.png'] = 35;
mIcons['d_ywlq.png'] = 55;
mIcons['d_zjf.png'] = 17;
mIcons['d_zjsr.png'] = 47;
mIcons['d_zlf.png'] = 49;
mIcons['d_zysr.png'] = 12;
mIcons['d_yfkz.png'] = 57;
mIcons['d_zwwc.png'] = 58;
mIcons['d_pxjx.png'] = 59;
mIcons['d_cwbb.png'] = 60;
mIcons['d_lydj.png'] = 61;
mIcons['d_slqk.png'] = 62;
mIcons['d_csjz.png'] = 63;
mIcons['d_lzss.png'] = 64;
mIcons['d_pcfk.png'] = 65;
mIcons['d_yl.png'] = 66;
mIcons['d_zc.png'] = 67;
mIcons['d_tc.png'] = 68;
mIcons['d_mc.png'] = 69;
mIcons['d_jyf.png'] = 70;
mIcons['d_wc.png'] = 71;
mIcons['d_wg.png'] = 72;
mIcons['d_cmswzc.png'] = 73;
mIcons['d_cp.png'] = 74;
mIcons['d_yhsxf.png'] = 75;
mIcons['d_ggx.png'] = 76;
mIcons['d_fd.png'] = 77;
mIcons['d_zs.png'] = 78;
mIcons['d_jydq.png'] = 79;
mIcons['d_jj.png'] = 80;
mIcons['d_shyp.png'] = 81;
mIcons['d_dy.png'] = 82;
mIcons['d_wanj.png'] = 83;
mIcons['d_yx.png'] = 84;
mIcons['d_nf.png'] = 85;
mIcons['d_wj.png'] = 86;
mIcons['d_dhdsjwlxl.png'] = 87;
mIcons['d_tlrjq.png'] = 88;
mIcons['d_db.png'] = 89;
mIcons['d_cfsb.png'] = 90;
mIcons['d_qtjj.png'] = 91;
mIcons['d_zg.png'] = 92;
mIcons['d_fscl.png'] = 93;
mIcons['d_dlgzcl.png'] = 94;
mIcons['d_mc1.png'] = 95;
mIcons['d_wysb.png'] = 96;
mIcons['d_zszh.png'] = 97;
mIcons['d_fzcl.png'] = 98;
mIcons['d_slgzcl.png'] = 99;
mIcons['d_muc.png'] = 100;
mIcons['d_sfjj.png'] = 101;
mIcons['d_ctjj.png'] = 102;
mIcons['d_fjp.png'] = 103;
mIcons['d_hcp.png'] = 104;
mIcons['d_qcp.png'] = 105;
mIcons['d_lcp.png'] = 106;
mIcons['d_jdmp.png'] = 107;
mIcons['d_jhsp.png'] = 108;
mIcons['d_hsfz.png'] = 109;
mIcons['d_hssy.png'] = 110;
mIcons['d_hqhdfy.png'] = 111;
mIcons['d_zxmr.png'] = 112;
mIcons['d_xtxt.png'] = 113;
mIcons['d_hlqt.png'] = 114;
mIcons['d_glds.png'] = 115;
mIcons['d_mrwh'] = 116;
mIcons['d_pjsp'] = 117;
mIcons['d_jsqh'] = 118;
mIcons['d_jssh'] = 119;
mIcons['d_jsh']  = 120;
mIcons['d_jsbh'] = 121;
mIcons['d_lh']   = 122;
mIcons['d_qmcl'] = 123;
mIcons['d_fzsb'] = 124;
mIcons['d_hld']  = 125;
mIcons['d_qcqj'] = 126;
mIcons['icon_lyyp_hwzb'] = 127;
// 128
mIcons['icon_bbyp_zjwj'] = 129;
mIcons['icon_lyyp_hwyk'] = 130;
mIcons['icon_bbyp_nbnp'] = 131;
// 132
mIcons['icon_bbyp_ykxm'] = 133;
mIcons['icon_bbyp']      = 134;
mIcons['icon_qtzx_bmf']  = 135;
//136
mIcons['icon_yysr_fwsr']     = 137;
mIcons['icon_jrtz_bxsr.png'] = 138;
mIcons['icon_qtsr_thtk.png'] = 139;
mIcons['icon_qtsr_mfp.png']  = 140;
mIcons['icon_yyfy.png']      = 141;
mIcons['icon_yyfy_sf']       = 142;
mIcons['icon_yyfy_yyzf.png'] = 143;
mIcons['icon_jrbx_bxzc.png'] = 144;
mIcons['d_jseh'] = 145;
mIcons['d_jswh'] = 146;

var publicity = {
	/**
	* 超出页面宽度，缩放文字
	* $obj 要缩放的子元素
	* $parent 要比较的父元素
	*/
	zoomText : function( $obj, $parent ){
		function setFontSize(){
            var objW = $obj.width();
            var objH = $obj.height();
			var parentW = $parent.width();
			var scale = objW > parentW ? parentW / objW : 1; // 如果子元素的宽度大于要比较的父元素，获取缩放比例
            $obj.css({"display":"table","-webkit-transform" : "scale(" + scale +")"});
            $obj.css({'margin-bottom':objH*(scale-1)+'px'});

            // $obj.css({"display":"table","width":objW+'px',"zoom" :  scale});
		}
		
		setFontSize();

		var evt = 'onorientationchange' in window ? 'orientationchange' : 'resize';
		var timer = null;
		
		window.addEventListener(evt, function () {
			clearTimeout(timer);
			timer = setTimeout(setFontSize, 300);
		}, false);
	},
	desInit : function(obj,obj2){
		var width = obj.width();
		var fontSize = obj.css('font-size');
		var cont = obj.text();
		var subTextLength = width*2/parseInt(fontSize);
		if (cont.length>subTextLength){
			var subCont = cont.slice(0,subTextLength-5)+'…';
            obj.data('full-cont',cont);
            obj.data('sub-cont',subCont);
            obj.text(subCont);
            obj2.show();
            obj2.on('click',function(e){
                if('展开详情'==obj2.text()){
                    obj.text(cont);
                    obj2.text('收起');
                    obj2.css({'display':'block','text-align':'right'});
                }else{
                    obj.text(subCont);
                    obj2.text('展开详情');
                    obj2.css({'display':'inline','text-align':'left'});
                }

            })
		}
	},
	// 图标雪碧图，返回对应位置
	iconPosition : function( iconName ){
		return mIcons[iconName] * 48;
	},
	
	// 图片按父元素比例显示
	changeImgProportion : function( obj ){
		var $img = $(obj),
			imgW = $img.width(),
			imgH = $img.height(),
			imgScale = imgW / imgH, // 图片的宽高比
			$parentNode = $img.parent(),
			parentW = $parentNode.outerWidth(),
			parentH = $parentNode.outerHeight(),
			parentScale = parentW / parentH; // 父元素的宽高比

		if( imgScale > parentScale ){
			// 图片宽高比大于父元素宽高比，设置图片高度100%,截取图片宽度
			$img.css({ 
				"width" : "auto",
				"height" : "100%",
				"margin" : "0",
				"margin-left" : -Math.round((parentH / imgH * imgW - parentW) / 2)
			});	
		}else if( imgScale < parentScale ){
			// 图片宽高比小于父元素宽高比，设置图片宽度100%,截取图片高度
			$img.css({
				"width" : "100%",
				"height" : "auto",
				"margin" : "0",
				"margin-top" : -Math.round((parentW / imgW * imgH - parentH) / 2)
			});	
		}else{
			// 图片宽高比与父元素宽高比相等，设置图片宽高100%
			$img.css({
				"width" : "100%",
				"height" : "100%",
				"margin" : "0"
			});
		}
	},
	
	// 点击显示详情页图片大图
	showDetailImgPop : function( obj ){
		var $img = $(obj),
			$body = $("body"),
			$pop = $(".pop"),
			$popImg = $(".detailPop_img");
		
		$img.click(function(){
			$popImg.attr("src", $img.attr("src"));
			$pop.fadeIn();
			$body.on('touchmove',function(e) { e.preventDefault(); }, false);
		});
		
		$pop.click(function(){
			$(this).fadeOut();
			$body.off('touchmove');
		});
	},
	
	// 带连接的字符串文本url转换成连接
	TurnStrToUrl : function (str){
		var reg = /http(s)?:\/\/[\w-]*(\.[\w-]*)+/ig;
		return str.replace(reg, function(m){
			return '<a href="'+m+'">'+m+'</a>';
		});
	},
	
	// 初始化
	init : function(){
		FastClick.attach(document.body);
		
		var that = this;

		$(window).load(function(){
            that.zoomText($(".list-payoff-inner"), $(".list-payoff-wrap"));
            that.desInit($(".mod-account .des-cont"),$(".mod-account .des-more"));
            that.changeImgProportion($(".detailBanner_img"));
		});
	}
};

publicity.init();